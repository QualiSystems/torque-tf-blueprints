spec_version: 2
description: Workflow to set a VM's power-state

workflow: 
  scope: env_resource
  resource-types: vsphere_virtual_machine

grains:
  Power On VM:
    kind: ansible
    spec:
      source:
        store: ProductionBPs
        path: ansible/power-off-vm-openshift.yaml
      agent:
        name: openshift-agent
      inputs: 
      - vm_name: '{{ .bindings.inputs.namespace }}'
      - namespace: '{{ .bindings.outputs.vm_name }}'
      env-vars: []
      outputs:
      - result
      # Ansible inventory file in a YAML format
      inventory-file:
        localhost:
          hosts:
            127.0.0.1:
              ansible_connection: local