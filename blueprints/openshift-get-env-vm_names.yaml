spec_version: 2
description: Workflow to set a VM's power-state

workflow: 
  scope: env

outputs:
  vm_names:
    value: '{{ .grains.collect_vm_names.activities.deploy.commands.get-vm-names.outputs.vmNames }}'

grains:
  collect_vm_names:
    kind: shell
    spec:
      agent:
        name: openshift-agent
      files:
        - source: torque-tf-blueprints
          path: scripts/get_vm_names/get_vm_names.py
      activities:
        deploy:
          commands:
            - name: get-vm-names
              command: 'python get_vm_names.py && echo "VM Names: $vmNames"'
              outputs:
                - vmNames
