spec_version: 2
description: Workflow to set a VM's power-state

workflow: 
  scope: env_resource
  resource-types: torque_introspection_resource

grains:
  Power On VM:
    kind: ansible
    spec:
      source:
        store: torque-tf-blueprints
        path: ansible/power-on-vm-openshift.yaml
      agent:
        name: openshift-agent
      inputs: 
      - vm_name: '{{ .bindings.resource_type.torque_introspection_resource.outputs.vm_name }}'
      - namespace: '{{ .bindings.resource_type.torque_introspection_resource.outputs.namespace }}'
      env-vars: []
      outputs:
      - result
      # Ansible inventory file in a YAML format
      inventory-file:
        localhost:
          hosts:
            127.0.0.1:
              ansible_connection: local